(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d957342a"],{"26e0":function(t,e,a){"use strict";a("a8ef")},a8ef:function(t,e,a){},da5c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-container"},[i("div",{staticClass:"edit-container py-3 px-3"},[i("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"name"}},[t._v("Name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"Enter Name",required:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"image"}},[t._v("Image")]),t.image?i("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.image,width:"200",height:"200"}}):t._e(),i("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*",autocomplete:"off"},on:{change:t.handleFileChange}})]),i("div",{staticClass:"btn-area"},[i("button",{staticClass:"btn btn-outline-info",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" "+t._s(t.isProcessing?"Updating...":"Submit")+" ")])])])]),i("div",{staticClass:"back"},[i("button",{staticClass:"btn btn-link back-btn",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[i("img",{staticClass:"back-icon",attrs:{src:a("0142")}})])]),i("BottomNavTabsForPage",{staticClass:"bottom-navtabs"})],1)},r=[],n=a("1da1"),s=a("5530"),o=(a("96cf"),a("b0c0"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("d9e2"),a("2f62")),c=a("4cce"),u=a("2fa3"),m=a("a2e7"),l={name:"UserEdit",components:{BottomNavTabsForPage:m["a"]},data:function(){return{id:0,image:"",name:"",email:"",isProcessing:!1}},computed:Object(s["a"])({},Object(o["b"])(["currentUser"])),watch:{currentUser:function(t){if(-1!==t.id){var e=this.$route.params.id;this.setUser(e)}}},created:function(){if(-1!==this.currentUser.id){var t=this.$route.params.id;this.setUser(t)}},beforeRouteUpdate:function(t,e,a){if(-1!==this.currentUser.id){var i=t.params.id;this.setUser(i),a()}},methods:{setUser:function(t){var e=this.currentUser,a=e.id,i=e.image,r=e.name,n=e.email;a.toString()===t.toString()?(this.id=a,this.name=r,this.email=n,this.image=i):this.$router.push({name:"not-found"})},handleFileChange:function(t){var e=t.target.files;if(0===e.length)this.image="";else{var a=window.URL.createObjectURL(e[0]);this.image=a}},handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.name){a.next=4;break}return u["a"].fire({icon:"warning",title:"您尚未填寫姓名"}),a.abrupt("return");case 4:return i=t.target,r=new FormData(i),e.isProcessing=!0,a.next=9,c["a"].update({userId:e.id,formData:r});case 9:if(n=a.sent,s=n.data,"error"!==s.status){a.next=13;break}throw new Error(s.message);case 13:e.$router.push({name:"users",params:{id:e.id}}),u["a"].fire({icon:"success",title:"已成功編輯使用者資料！"}),a.next=21;break;case 17:a.prev=17,a.t0=a["catch"](0),e.isProcessing=!1,u["a"].fire({icon:"error",title:"無法更新使用者資料，請稍後再試"});case 21:case"end":return a.stop()}}),a,null,[[0,17]])})))()}}},d=l,f=(a("26e0"),a("2877")),b=Object(f["a"])(d,i,r,!1,null,"602d8c00",null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-d957342a.80e55040.js.map