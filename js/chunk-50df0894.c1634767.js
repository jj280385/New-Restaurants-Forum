(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50df0894"],{"0142":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQfmBBYFJxE6hazAAAAByElEQVRYw+2UMS9DYRSG3++WREXEJGFjafwAUjeGGuxGv4CpBv4CjUUQi0lsfoLEVEPTtQtSWxdpYywVjd7H0BTtveW6ra+ReMcv+c77nDfnHOlff0XguhCPD8B4ZAT29uD1FSYmLJsvLuLd3vIuSwDtXX+WBQB/15YAIB7H29+HRoN+yHt8hJsbODnBW1kBY74wd10oFvti3BUon4dkMsB8Z6dvXX+reh3W1zsAZmchm7UD0EpjY6MDwnFgawtqNTsELy94CwuSZNpBEgnp9FRy3eBpOTuT6vVwYz05KaVSUrfNyeWMWVoKmIlYDLa3g9P42RrijY3B4WH3JFKpLzYjkYBcrheAj1rHx8EAR0fffOxMIyKANz4O1aofoFAI2UErjeiXEC4u/Nvw8PCDArEYOE50gPNzfwLPz0NhCxjTaEQ1b2puzv9WLvdWM3T3yWTwQbq8tGA+PQ13d8EAm5u/Y+oND8PMDKTTUC4Hr2CtBlNTIbs4OOjnIW5qd1eSIk91bxEVClImMyCAUklaXTXm6WkAAFdXYn7eOKVS68USwPW1tLYmLS8bp/36hTxE+bw0OhreEKRKRdzfy2SzxhSLdhr9VwS9AdXKFw7WQXc3AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTIyVDA1OjM5OjE3KzAwOjAw6e3X/AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0yMlQwNTozOToxNyswMDowMJiwb0AAAAAASUVORK5CYII="},"3e4e":function(t,e,a){"use strict";a("85bc")},"45e4":function(t,e,a){},"4c70":function(t,e,a){"use strict";a("9e05")},6135:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"admin-container py-3 px-2"},[s("AdminNav"),t.isLoading?s("Spinner",{staticClass:"admin-spinner"}):s("table",{staticClass:"table my-4"},[s("thead",{staticClass:"thead"},[s("tr",{staticClass:"tr-header"},[s("th",{staticClass:"column pl-3 col-1 col-sm-1",attrs:{scope:"col",width:"100"}},[t._v("ID")]),s("th",{staticClass:"column col-6 col-sm-6",attrs:{scope:"col"}},[t._v("Email")]),s("th",{staticClass:"column col-2 col-sm-2",attrs:{scope:"col",width:"150"}},[t._v("Role")]),s("th",{staticClass:"column col-3 col-sm-3",attrs:{scope:"col",width:"150"}},[t._v("Action")])])]),s("tbody",t._l(t.users,(function(e){return s("tr",{key:e.id,staticClass:"tr-item"},[s("th",{staticClass:"id pl-4",attrs:{scope:"row"}},[t._v(t._s(e.id))]),s("td",{staticClass:"email"},[t._v(t._s(e.email))]),s("td",{staticClass:"role"},[t._v(t._s(e.isAdmin?"admin":"user"))]),s("td",{staticClass:"d-flex justify-content-between"},[t.currentUser.id!==e.id?s("button",{staticClass:"btn btn-link toggle",attrs:{type:"button"},on:{click:function(a){return t.toggleUserRole({userId:e.id,isAdmin:e.isAdmin})}}},[t._v(" "+t._s(e.isAdmin?"set as user":"set as admin")+" ")]):t._e()])])})),0)])],1),s("div",{staticClass:"back"},[s("button",{staticClass:"btn btn-link back-btn",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[s("img",{staticClass:"back-icon",attrs:{src:a("0142")}})])]),s("BottomNavTabsForPage",{staticClass:"bottom-navtabs"})],1)},n=[],r=a("1da1"),i=a("5530"),c=(a("96cf"),a("d9e2"),a("d3b7"),a("25f0"),a("d81d"),a("e04c")),o=a("2f62"),u=a("be6c"),l=a("2fa3"),A=a("2375"),d=a("a2e7"),m={components:{AdminNav:c["a"],Spinner:A["a"],BottomNavTabsForPage:d["a"]},data:function(){return{users:[],isLoading:!0}},computed:Object(i["a"])({},Object(o["b"])(["currentUser"])),created:function(){this.fetchUser()},methods:{fetchUser:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].users.get();case 3:if(a=e.sent,s=a.data,"error"!==s.status){e.next=7;break}throw new Error(s.message);case 7:t.users=s.users,t.isLoading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),t.isLoading=!1,l["a"].fire({icon:"error",title:"無法取得該會員資料，請稍後再試"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},toggleUserRole:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,n,r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.userId,n=t.isAdmin,a.prev=1,a.next=4,u["a"].users.update({userId:s,isAdmin:(!n).toString()});case 4:if(r=a.sent,c=r.data,"error"!==c.status){a.next=8;break}throw new Error(c.message);case 8:e.users=e.users.map((function(t){return t.id===s?Object(i["a"])(Object(i["a"])({},t),{},{isAdmin:!n}):t})),l["a"].fire({icon:"success",title:"已成功更新會員角色"}),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),l["a"].fire({icon:"error",title:"無法更新會員角色，請稍後再試"});case 15:case"end":return a.stop()}}),a,null,[[1,12]])})))()}}},f=m,b=(a("3e4e"),a("2877")),v=Object(b["a"])(f,s,n,!1,null,"79595635",null);e["default"]=v.exports},"85bc":function(t,e,a){},"9e05":function(t,e,a){},a2e7:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabs"},[s("ul",{staticClass:"bottom-nav"},[s("li",{staticClass:"items"},[s("button",{staticClass:"btn btn-link back-icon",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[s("img",{attrs:{src:a("0142")}})])]),s("li",{staticClass:"items"},[s("router-link",{attrs:{to:"/restaurants"}},[s("img",{attrs:{src:a("297d")}})])],1)])])},n=[],r=(a("4c70"),a("2877")),i={},c=Object(r["a"])(i,s,n,!1,null,"f96d830a",null);e["a"]=c.exports},be6c:function(t,e,a){"use strict";a("b0c0");var s=a("2fa3");e["a"]={categories:{get:function(){return s["b"].get("/admin/categories")},create:function(t){var e=t.name;return s["b"].post("/admin/categories",{name:e})},update:function(t){var e=t.categoryId,a=t.name;return s["b"].put("/admin/categories/".concat(e),{name:a})},delete:function(t){var e=t.categoryId;return s["b"].delete("/admin/categories/".concat(e))}},restaurants:{create:function(t){var e=t.formData;return s["b"].post("/admin/restaurants",e)},get:function(){return s["b"].get("/admin/restaurants")},getDetail:function(t){var e=t.restaurantId;return s["b"].get("/admin/restaurants/".concat(e))},update:function(t){var e=t.restaurantId,a=t.formData;return s["b"].put("/admin/restaurants/".concat(e),a)},deleteRestaurant:function(t){var e=t.restaurantId;return s["b"].delete("/admin/restaurants/".concat(e))}},users:{get:function(){return s["b"].get("/admin/users")},update:function(t){var e=t.userId,a=t.isAdmin;return s["b"].put("/admin/users/".concat(e),{isAdmin:a})}}}},d657:function(t,e,a){"use strict";a("45e4")},d81d:function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").map,r=a("1dde"),i=r("map");s({target:"Array",proto:!0,forced:!i},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e04c:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("h1",{staticClass:"display-4"},[t._v("Admin System")]),a("ul",{staticClass:"nav nav-pills nav-tabs my-3"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/restaurants"}},[t._v(" Restaurants ")])],1),a("li",[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/categories"}},[t._v(" Categories ")])],1),a("li",[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/users"}},[t._v(" Users ")])],1)])])},n=[],r=(a("d657"),a("2877")),i={},c=Object(r["a"])(i,s,n,!1,null,"d2dc64dc",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-50df0894.c1634767.js.map