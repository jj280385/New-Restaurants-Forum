(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7989b06"],{"0142":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgEAQAAACJ4248AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQfmBBYFJxE6hazAAAAByElEQVRYw+2UMS9DYRSG3++WREXEJGFjafwAUjeGGuxGv4CpBv4CjUUQi0lsfoLEVEPTtQtSWxdpYywVjd7H0BTtveW6ra+ReMcv+c77nDfnHOlff0XguhCPD8B4ZAT29uD1FSYmLJsvLuLd3vIuSwDtXX+WBQB/15YAIB7H29+HRoN+yHt8hJsbODnBW1kBY74wd10oFvti3BUon4dkMsB8Z6dvXX+reh3W1zsAZmchm7UD0EpjY6MDwnFgawtqNTsELy94CwuSZNpBEgnp9FRy3eBpOTuT6vVwYz05KaVSUrfNyeWMWVoKmIlYDLa3g9P42RrijY3B4WH3JFKpLzYjkYBcrheAj1rHx8EAR0fffOxMIyKANz4O1aofoFAI2UErjeiXEC4u/Nvw8PCDArEYOE50gPNzfwLPz0NhCxjTaEQ1b2puzv9WLvdWM3T3yWTwQbq8tGA+PQ13d8EAm5u/Y+oND8PMDKTTUC4Hr2CtBlNTIbs4OOjnIW5qd1eSIk91bxEVClImMyCAUklaXTXm6WkAAFdXYn7eOKVS68USwPW1tLYmLS8bp/36hTxE+bw0OhreEKRKRdzfy2SzxhSLdhr9VwS9AdXKFw7WQXc3AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA0LTIyVDA1OjM5OjE3KzAwOjAw6e3X/AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNC0yMlQwNTozOToxNyswMDowMJiwb0AAAAAASUVORK5CYII="},"02c1":function(t,e,s){},1197:function(t,e,s){},1511:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[t.isLoading?r("Spinner",{staticClass:"spinner"}):r("div",{staticClass:"main-container"},[[r("div",{staticClass:"user mb-5"},[r("UserProfileCard",{attrs:{user:t.user,"is-current-user":t.currentUser.id===t.user.id,"initial-is-followed":t.isFollowed}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4 col-sm-6 col-12"},[r("UserFollowingsCard",{attrs:{followings:t.user.Followings}}),r("UserFollowersCard",{attrs:{followers:t.user.Followers}})],1),r("div",{staticClass:"col-md-8 col-sm-6 col-12"},[r("UserCommentsCard",{attrs:{comments:t.user.Comments}}),r("UserFavoritedRestaurantsCard",{attrs:{favoritedRestaurants:t.user.FavoritedRestaurants}})],1)])],1)]],2),r("div",{staticClass:"back"},[r("button",{staticClass:"btn btn-link back-btn",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[r("img",{staticClass:"back-icon",attrs:{src:s("0142")}})])]),r("BottomNavTabsForPage",{staticClass:"bottom-navtabs"})],1)},a=[],n=s("1da1"),i=s("5530"),o=(s("96cf"),s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card mx-4 mb-4 mt-3 pb-3"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-12 col-sm-12 header"},[s("img",{staticClass:"avatar col-6 col-sm-6",attrs:{src:t._f("emptyImage")(t.user.image)}}),s("div",{staticClass:"card-body px-3 col-6 col-sm-6"},[s("h5",{staticClass:"user-name"},[t._v(" "+t._s(t.user.name)+" ")]),s("p",{staticClass:"user-mail"},[t._v(" "+t._s(t.user.email)+" ")]),s("ul",{staticClass:"list-unstyled list-inline"},[s("li",[s("strong",[t._v("Comments :")]),t._v(" "+t._s(t.user.Comments.length)+" ")]),s("li",[s("strong",[t._v("Collection :")]),t._v(" "+t._s(t.user.FavoritedRestaurants.length)+" ")]),s("li",[s("strong",[t._v("Following :")]),t._v(" "+t._s(t.user.Followings.length)+" ")]),s("li",[s("strong",[t._v("Followers :")]),t._v(" "+t._s(t.user.Followers.length)+" ")])]),t.isCurrentUser?[s("div",{staticClass:"user-edit"},[s("router-link",{staticClass:"btn btn-outline-info py-2 px-4",attrs:{to:{name:"users-edit",params:{id:t.user.id}}}},[t._v(" Edit ")])],1)]:[t.isFollowed?s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollowing(t.user.id)}}},[t._v(" 取消追蹤 ")]):s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowing(t.user.id)}}},[t._v(" 追蹤 ")])]],2)])])])}),l=[],c=(s("d9e2"),s("2708")),u=s("4cce"),d=s("2fa3"),m={mixins:[c["a"]],props:{user:{type:Object,required:!0},isCurrentUser:{type:Boolean,required:!0},initialIsFollowed:{type:Boolean,required:!0}},data:function(){return{isFollowed:this.initialIsFollowed}},watch:{initialIsFollowed:function(t){this.isFollowed=t}},methods:{addFollowing:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].addFollowing({userId:t});case 3:if(r=s.sent,a=r.data,"error"!==a.status){s.next=7;break}throw new Error(a.message);case 7:e.isFollowed=!0,s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](0),console.error(s.t0.message),d["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,10]])})))()},deleteFollowing:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u["a"].deleteFollowing({userId:t});case 3:if(r=s.sent,a=r.data,"error"!==a.status){s.next=7;break}throw new Error(a.message);case 7:e.isFollowed=!1,s.next=14;break;case 10:s.prev=10,s.t0=s["catch"](0),console.error(s.t0.message),d["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,10]])})))()}}},A=m,f=(s("fafd"),s("2877")),p=Object(f["a"])(A,o,l,!1,null,"d091a70a",null),v=p.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-card mb-3 ml-3"},[s("div",{staticClass:"user-header px-3 py-3"},[t._v(" "+t._s(t.followings.length)+" Followings ")]),s("div",{staticClass:"user-body px-3 py-3"},t._l(t.followings,(function(e){return s("router-link",{key:e.id,attrs:{to:{name:"users",params:{id:e.id}}}},[s("img",{staticClass:"mr-1 mb-1 user-avatar",attrs:{src:t._f("emptyImage")(e.image)}})])})),1)])},g=[],C={mixins:[c["a"]],props:{followings:{type:Array,required:!0}}},b=C,h=(s("df27"),Object(f["a"])(b,w,g,!1,null,"45c207e6",null)),F=h.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-card ml-3 mt-4"},[s("div",{staticClass:"user-header px-3 py-3"},[t._v(" "+t._s(t.followers.length)+" Followers ")]),s("div",{staticClass:"user-body px-3 py-3"},t._l(t.followers,(function(e){return s("router-link",{key:e.id,attrs:{to:{name:"users",params:{id:e.id}}}},[s("img",{staticClass:"mr-1 mb-1 user-avatar",attrs:{src:t._f("emptyImage")(e.image)}})])})),1)])},_=[],x={mixins:[c["a"]],props:{followers:{type:Array,required:!0}}},k=x,R=(s("a310"),Object(f["a"])(k,y,_,!1,null,"0a5b043e",null)),E=R.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-card mr-3"},[s("div",{staticClass:"user-header px-3 py-3"},[t._v(" Comments "+t._s(t.comments.length)+" restaurants ")]),s("div",{staticClass:"user-body px-3 py-3"},t._l(t.comments,(function(e){return s("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.Restaurant.id}}}},[s("img",{staticClass:"mr-1 mb-1 restaurant-avatar",attrs:{src:t._f("emptyImage")(e.Restaurant.image),width:"60",height:"60"}})])})),1)])},O=[],B={name:"userCommentsCard",mixins:[c["a"]],props:{comments:{type:Array,required:!0}}},j=B,I=(s("c037"),Object(f["a"])(j,U,O,!1,null,"90b7f4b4",null)),T=I.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-card mr-4 mt-4"},[s("div",{staticClass:"user-header px-3 py-3"},[t._v(" Collection "+t._s(t.favoritedRestaurants.length)+" restaurants ")]),s("div",{staticClass:"user-body px-3 py-3"},t._l(t.favoritedRestaurants,(function(e){return s("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}}}},[s("img",{staticClass:"mr-1 mb-1 restaurant-avatar",attrs:{src:t._f("emptyImage")(e.image),width:"60",height:"60"}})])})),1)])},N=[],S={mixins:[c["a"]],props:{favoritedRestaurants:{type:Array,required:!0}}},Y=S,P=(s("d684"),Object(f["a"])(Y,L,N,!1,null,"52b22183",null)),W=P.exports,D=s("2f62"),M=s("2375"),Q=s("a2e7"),X={name:"User",components:{UserProfileCard:v,UserFollowingsCard:F,UserFollowersCard:E,UserCommentsCard:T,UserFavoritedRestaurantsCard:W,Spinner:M["a"],BottomNavTabsForPage:Q["a"]},created:function(){var t=this.$route.params.id;this.fetchUser(t)},computed:Object(i["a"])({},Object(D["b"])(["currentUser"])),beforeRouteUpdate:function(t,e,s){var r=t.params.id;this.fetchUser(r),s()},data:function(){return{user:{id:-1,name:"",email:"",image:"",Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]},isFollowed:!1,isLoading:!0}},methods:{fetchUser:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isLoading=!0,s.next=4,u["a"].get({userId:t});case 4:r=s.sent,a=r.data,n=a.profile,e.user={id:n.id,name:n.name,email:n.email,image:n.image,Comments:n.Comments,FavoritedRestaurants:n.FavoritedRestaurants,Followers:n.Followers,Followings:n.Followings},e.isFollowed=a.isFollowed,e.isLoading=!1,s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](0),e.isLoading=!1,d["a"].fire({icon:"error",title:"無法取得該使用者資料，請稍後再試"});case 16:case"end":return s.stop()}}),s,null,[[0,12]])})))()}}},J=X,V=(s("ce03"),Object(f["a"])(J,r,a,!1,null,"a650fe3e",null));e["default"]=V.exports},1884:function(t,e,s){},"3c79":function(t,e,s){},"4c70":function(t,e,s){"use strict";s("9e05")},7741:function(t,e,s){},"9e05":function(t,e,s){},a2e7:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tabs"},[r("ul",{staticClass:"bottom-nav"},[r("li",{staticClass:"items"},[r("button",{staticClass:"btn btn-link back-icon",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[r("img",{attrs:{src:s("0142")}})])]),r("li",{staticClass:"items"},[r("router-link",{attrs:{to:"/restaurants"}},[r("img",{attrs:{src:s("297d")}})])],1)])])},a=[],n=(s("4c70"),s("2877")),i={},o=Object(n["a"])(i,r,a,!1,null,"f96d830a",null);e["a"]=o.exports},a310:function(t,e,s){"use strict";s("e957")},c037:function(t,e,s){"use strict";s("7741")},ce03:function(t,e,s){"use strict";s("02c1")},d684:function(t,e,s){"use strict";s("3c79")},df27:function(t,e,s){"use strict";s("1197")},e957:function(t,e,s){},fafd:function(t,e,s){"use strict";s("1884")}}]);
//# sourceMappingURL=chunk-a7989b06.9e25c7d0.js.map