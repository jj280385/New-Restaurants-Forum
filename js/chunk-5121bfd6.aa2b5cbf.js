(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5121bfd6"],{"22ab":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-container"},[s("JumbotronForGourmets"),s("BottomNavTabs",{staticClass:"bottom-nav"}),s("div",{staticClass:"card-container"},[s("NavTabs"),t.isLoading?s("Spinner"):[s("div",{staticClass:"page-title mt-5 pt-4 ml-4"},[s("span",[t._v(" POPULAR FOODIES ")]),s("p",{staticClass:"hint"},[t._v("● Click the Follow button to follow other user.")])]),s("div",{staticClass:"users row text-center cards"},t._l(t.users,(function(e){return s("div",{key:e.id,staticClass:"col-sm-4 col-md-4 col-lg-3 user-card my-3"},[s("div",{staticClass:"content-border"},[s("router-link",{staticClass:"link",attrs:{to:{name:"users",params:{id:e.id}}}},[s("img",{staticClass:"user-avatar",attrs:{src:t._f("emptyImage")(e.image)}})]),s("div",{staticClass:"user-info"},[s("p",{staticClass:"title my-3"},[s("router-link",{staticClass:"title",attrs:{to:{name:"users",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")])],1),s("span",{staticClass:"badge badge-secondary"},[t._v(t._s(e.followerCount)+" persons Following ")]),s("p",{staticClass:"mt-3 btns"},[e.isFollowed?s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteFollowing(e.id)}}},[t._v(" Unfollow ")]):s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFollowing(e.id)}}},[t._v(" Follow ")])])])],1)])})),0)]],2)],1)},a=[],r=s("5530"),o=s("1da1"),i=(s("96cf"),s("d81d"),s("b0c0"),s("d9e2"),s("8bb1")),c=s("2708"),l=s("4cce"),u=s("2fa3"),d=s("2375"),f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jumbotron"},[s("div",{staticClass:"jumbotron-title"},[s("span",{staticClass:"title-area"},[t._v(" Foodies with the Most Reviewed Restaurants. ")]),s("span",{staticClass:"introduce"},[t._v(" Click the button to follow foodies. ")])])])}],p=(s("2420"),s("2877")),w={},b=Object(p["a"])(w,f,m,!1,null,"7e02b760",null),v=b.exports,g=s("dd5e"),h={components:{NavTabs:i["a"],Spinner:d["a"],JumbotronForGourmets:v,BottomNavTabs:g["a"]},mixins:[c["a"]],data:function(){return{users:[],isLoading:!0}},created:function(){this.fetchUser()},methods:{fetchUser:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,l["a"].getTopUsers();case 4:s=e.sent,n=s.data,t.users=n.users.map((function(t){return{id:t.id,name:t.name,image:t.image,followerCount:t.FollowerCount,isFollowed:t.isFollowed}})),t.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.isLoading=!1,u["a"].fire({icon:"error",title:"無法取得美食達人，請稍後再試"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},addFollowing:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].addFollowing({userId:t});case 3:if(n=s.sent,a=n.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:e.users=e.users.map((function(e){return e.id!==t?e:Object(r["a"])(Object(r["a"])({},e),{},{followerCount:e.followerCount+1,isFollowed:!0})})),u["a"].fire({icon:"success",title:"已成功Follow"}),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),u["a"].fire({icon:"error",title:"無法加入Follow，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},deleteFollowing:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].deleteFollowing({userId:t});case 3:if(n=s.sent,a=n.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:e.users=e.users.map((function(e){return e.id!==t?e:Object(r["a"])(Object(r["a"])({},e),{},{followerCount:e.followerCount-1,isFollowed:!1})})),u["a"].fire({icon:"success",title:"已取消Follow"}),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),u["a"].fire({icon:"error",title:"無法取消Follow，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()}}},C=h,F=(s("b4d5"),Object(p["a"])(C,n,a,!1,null,"105683b4",null));e["default"]=F.exports},2420:function(t,e,s){"use strict";s("7670")},3273:function(t,e,s){},7670:function(t,e,s){},b4d5:function(t,e,s){"use strict";s("3273")},d81d:function(t,e,s){"use strict";var n=s("23e7"),a=s("b727").map,r=s("1dde"),o=r("map");n({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5121bfd6.aa2b5cbf.js.map